<% layout('./boilerplate') -%>

<div class="w-full flex justify-center py-4 lg:px-16 sm:px-4">
  <div class="flex flex-col justify-center lg:px-12 sm:px-8 px-6 bg-light-dark rounded-md w-full h-32 shadow">
    <p class="text-xs text-dark-light mb-2">
      <span> <a href="/play">Play</a> / Analyze /</span>
      <span> <a href="/play/analyze/<%= gameLog.id %>"><%= gameLog.gameName %></a></span>
    </p>
    <div class="flex items-center">
      <p class="text-4xl"><%= gameLog.gameName %></p>
    </div>
  </div>
</div>

<div class="w-full flex justify-center py-4 lg:px-16 sm:px-4">
  <div class="flex flex-col justify-center lg:px-12 sm:px-8 px-6 py-8 bg-light-dark rounded-md w-full shadow">
    <div class="flex sm:flex-row flex-col justify-between items-center mb-2">
      <p class="text-3xl text-theme5">My Score: <%= gameLog.score %></p>
      <p class="text-lg">Team <%= gameLog.team %></p>
    </div>
    <p class="text-lg text-green-800 mb-8"><span id="correct">0</span> / <span id="total">0</span> Correct</p>
    <% var totalQuestions = 0;%>
    <% var correctQuestions = 0;%>
    <% gameLog.questions.forEach(function (question) { %>
      <% totalQuestions++; %>
      <% if (question.answer === question.studentResponse) { %>
        <% correctQuestions++; %>
      <% } %>
      <div class="flex flex-col justify-center w-full bg-dark-light rounded-md shadow py-6 px-8 mb-6 text-light">
        <p class="text-lg mb-3"><span class="font-bold">Question: </span> <%= question.question %> <br/> </p>
        <p class="text-teal-300"><span class="font-bold">Your Answer: </span> <%= question.studentResponse %> </p>
        <p class="text-green-300 mb-4"><span class="font-bold">Correct Answer: </span> <%= question.answer %> </p>
        <p><span class="font-bold">Problem Solution: </span> <br/> <%= question.solution %> </p>
      </div>
    <% }); %>
  </div>
</div>

<script type="text/javascript">
  document.getElementById("correct").innerHTML = <%= correctQuestions %>
  document.getElementById("total").innerHTML = <%= totalQuestions %>
</script>
